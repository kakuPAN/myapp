<div class="header-wrapper">
  <div class="logo">
    <ul>
      <li>Share</li>
      <li>Puchi</li>  
      <li>Happy</li>
    </ul>
  </div>
  <div class="search-form-container">
    <%= render "shared/search_form", q: @q %>
  </div>
  <% if current_user %>
    <div class="mypage-container" id="mypageContainer">
      <span class="header-user-name"><%= current_user.user_name %>さん</span>
      <div class="mypage-dropdown" id="mypageDropdown">
        <ul>
          <li><%= link_to "ログアウト", logout_path, data: { turbo_method: :delete } %></li>
          <li><%= link_to "新規投稿", new_board_path %></li>
          <li><%= link_to "投稿一覧", boards_path %></li>
          <li><%= link_to "ユーザー情報", show_profile_user_path(current_user) %></li>
        </ul>
      </div>
    </div>
  <% else %>
    <div id="mypageContainer">
      <span class="user-title header-text">ゲストユーザー</span>
      <div class="mypage-dropdown" id="mypageDropdown">
        <ul>
          <li><%= link_to "ユーザー登録", new_user_path %>
          <li><%= link_to "ログイン", login_path, class: "login-text" %></li>
          <li><%= link_to "トップ", root_path %></li>
        </ul>
      </div>
    </div>
  <% end %> 
</div>
<!--ユーザーネームをマウスオーバーでプルダウン表示 !-->
<script>
  document.addEventListener('turbo:load', function() {
    const mypageContainer = document.getElementById('mypageContainer');
    const mypageDropdown = document.querySelector('.mypage-dropdown');

    if (mypageContainer) {
      
      mypageContainer.addEventListener('mouseover', function() {
        mypageDropdown.style.display = 'block'
        event.stopPropagation(); // キャプチャおよびバブリング段階において現在のイベントのさらなる伝播を阻止
      });

      document.addEventListener('click', function() {
        mypageDropdown.style.display = 'none';
      });
    }
  });
</script>
<style>
<%# 全体のボーダーを表示・スクロールバーを非表示%>
* {
  /*outline: 2px solid blue;*/
  scrollbar-width: none;
}
</style>
<!-- プルダウン !-->
<style>
  .header-wrapper {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px;
    height: 70px;
    background-color: pink;
    position: relative;
  }
  .search-form-container {
    flex: 2; /* 中央部分に広いスペースを割り当て */
    display: flex;
    justify-content: center; /* 水平方向に中央揃え */
  }
  .header-content a:hover {
    color: rgba(233, 155, 0, 0.946);
  }
</style>
<style>
  .mypage-container {
    position: relative;
    flex: 1; /* 右側の部分に適切な幅を確保 */
    display: flex;
    justify-content: flex-end; /* 要素を右揃え */
    top: -50%;
  }
  .header-user-name {
    font-size: 20px;
    margin: auto;
    position: absolute;
    right: 5%;
    cursor: pointer;
  }
  .mypage-dropdown {
    display: none; /* 初期状態では非表示 */
    position: absolute; /* 親要素に対して絶対位置 */
    top: 30px; /* 親要素の真下に配置 */
    right: 0; /* 右揃え */
    background-color: #fff; /* 背景色を白に設定 */
    border: 1px solid #ccc; /* 境界線を設定 */
    border-radius: 4px; /* 角を丸く */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* 軽い影を追加 */
    z-index: 1000; /* 他の要素の上に配置 */
    min-width: 150px; /* 最小幅を指定 */
    
  }
  .mypage-dropdown a {
    color: #5c3e26;
    text-decoration: none;
  }
  .mypage-dropdown ul {
    list-style: none;
    margin: 0 auto;
    padding: 0 5px;
  }
  .mypage-dropdown li {
    text-align: left;
  }
  .mypage-dropdown ul li a:hover {
    background-color: #f0f0f0; /* ホバー時の背景色 */
    color: #007bff; /* ホバー時のリンク色 */
  }
</style>
<style>
  .logo {
    flex: 1;
    width: 100%;
    height: 100%;
  }
  .logo ul {
    list-style: none;
  }
  .logo li {
    font-weight: bold;
  }
</style>
